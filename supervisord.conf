[supervisord]
nodaemon=true
logfile=/dev/stdout
logfile_maxbytes=0

; Whisper Live backend
[program:whisper]
command=python3 server/WhisperLive/run_server.py --port 9090 --backend faster_whisper
directory=/app
autostart=true
autorestart=true
startsecs=5
stopasgroup=true
killasgroup=true
stderr_logfile=/dev/stderr
stdout_logfile=/dev/stdout

; Next.js frontend (production mode)
[program:nextapp]
command=npm run start
directory=/app
autostart=true
autorestart=true
startsecs=5
stopasgroup=true
killasgroup=true
environment=NODE_ENV="production"
stderr_logfile=/dev/stderr
stdout_logfile=/dev/stdout

; Express backend
[program:expressapp]
command=node server/index.js
directory=/app
autostart=true
autorestart=true
startsecs=5
stopasgroup=true
killasgroup=true
stderr_logfile=/dev/stderr
stdout_logfile=/dev/stdout
