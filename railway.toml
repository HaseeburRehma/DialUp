[build]
# Use Docker build instead of custom build script
builder = "dockerfile"

[deploy]
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Increase memory and timeout for build
[deploy.env]
RAILWAY_STATIC_URL = "true"

# Resource limits
[build.env]
# Set memory limits for build processes
NODE_OPTIONS = "--max_old_space_size=2048"
NIXPACKS_MEMORY = "4GB"

[deploy.env]
# Runtime memory settings
PYTHON_BUFFERED = "1"

# Auto-remove old containers
[experimental]
incrementalBuildCaching = true